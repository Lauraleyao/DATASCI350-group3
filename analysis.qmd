---
title: "QTM 350 Final Project Analysis"
format: html

bibliography: references.bib
---
**Public Health Infrastructure, Human Capital, and Diverging Life Expectancy Trends in Sub-Saharan Africa and South Asia, 2000–2020**

Anita Osuri (2557540)  
Laura Wang (2550326)  
Winnie Lau (2554252)  
Caitlyn Ye (2555901)  
Tashifa Noor (2588861)  

This is a Quarto document inside the DATASCI350-group3 repo.

## Introduction

Over the last twenty years, Sub-Saharan Africa and South Asia have experienced substantial changes in sanitation, life expectancy, and economic conditions. The pace and consistency of these changes differ between the two regions. Our core question is: As Sub-Saharan Africa and South Asia underwent major development from 2000 to 2020, to what extent did improvements in public health infrastructure (water and sanitation) and human capital (primary education) correspond to their divergent paths in life expectancy?

Sub-Saharan Africa lags in access to basic drinking water and sanitation, and multiple studies link this gap to slower progress in life expectancy. Access to basic sanitation substantially reduces early-life mortality risks [@gaffan2023]. Improved drinking water lowers exposure to diarrheal disease, one of the major contributors to preventable child mortality [@wolf2018]. Inadequate water, sanitation, and hygiene account for more than 800,000 global deaths per year [@pruss2019], underscoring the importance of WASH infrastructure in shaping survival. Expanding basic sanitation also yields large health and economic returns, especially in lower-income regions [@hutton2017].

Primary school enrollment is associated with reduced child mortality due to greater health literacy and care-seeking behaviors [@amegbor2023]. Education is one of the strongest social determinants of early-life survival [@cutler2010]. Rising GDP per capita supports these improvements by increasing government capacity to invest in essential infrastructure, health systems, and education [@raina2025] [@bloom2014]. Improvements in early-life survival may also contribute to longer-term gains in life expectancy.

Compared with Sub-Saharan Africa, South Asia has seen faster increases in water and sanitation access, more rapid economic growth, and rising primary enrollment. These shifts align with steeper improvements in life expectancy [@unicef2021] [@worldbank2023]. We hypothesize that higher levels of basic drinking water access, basic sanitation coverage, primary school enrollment, and GDP per capita will be positively correlated with life expectancy, and that this association will be more pronounced in South Asia than in Sub-Saharan Africa.

## Data Description

## Data Analysis

### Variable Correlations: Heatmap
#### Methodology
To begin exploring the relationship between these variables, correlation matrices for the 5 variables of interest (life expectancy at birth, basic water access, basic sanitation access, primary school enrollment, and GDP per capita) in Sub-Saharan Africa and South Asia were calculated and visualized. Since the dataset includes longitudinal data, these variables were averaged at the country level to obtain a single representative value per country. The dataset was then subsetted by region to create two correlation matrices for region-level analysis. The Sub-Saharan Africa region contained 48 countries while South Asia contained 6 countries. Finally, heatmaps were created from the matrices to visualize the Pearson correlation coefficients and show how strongly each variable is associated with each other.

#### Results
As seen in @fig-heatmap, in Sub-Saharan Africa, all five development indicators show positive correlations with one another. The correlations between life expectancy at birth and each of the 4 other variables range from weak to intermediate correlation strength. The correlation between life expectancy and primary school enrollment is lowest at 0.25, while the correlation with basic water access is highest at 0.53. In South Asia, there is greater variability in correlation between the variables, compared to Sub-Saharan Africa. Life expectancy is positively correlated with basic water access (0.33), basic sanitation access (0.95), and GDP per capita (0.89). Such strong correlation is not seen in Sub-Saharan Africa countries. However, primary school enrollment is negatively correlated with all 4 of the other variables, including a correlation of -0.38 with life expectancy.

```{python}
#| echo: false
#| label: fig-heatmap
#| fig-cap: "Correlation Heatmaps for Sub-Saharan Africa and South Asia"

import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
import numpy as np

# load data
df = pd.read_csv("data/qtm350_final.csv")

# define the 5 variables
vars = ['life_expectancy_birth', 'basic_water_access_pct', 'basic_sanitation_access_pct', 'primary_school_enrollment', 'gdp_per_capita_constant_usd']

# average by country
country_means = (
    df.groupby(["Region", "Country"])[vars]
      .mean()
      .reset_index()
)

# subset countries in each region
ssa = country_means[country_means["Region"] == "Sub-Saharan Africa"]
sa  = country_means[country_means["Region"] == "South Asia"]

# compute region-specific correlations
corr_ssa = ssa[vars].corr()
corr_sa  = sa[vars].corr()

# plot heatmaps
mask = np.triu(np.ones_like(corr_ssa, dtype=bool), k=1)

plt.figure(figsize=(10, 4))

plt.subplot(1, 2, 1)
sns.heatmap(corr_ssa, annot=True, cmap="coolwarm", vmin=-1, vmax=1, mask=mask)
plt.title("Correlation Matrix – Sub-Saharan Africa")

plt.subplot(1, 2, 2)
sns.heatmap(corr_sa, annot=True, cmap="coolwarm", vmin=-1, vmax=1, mask=mask)
plt.title("Correlation Matrix – South Asia")

plt.tight_layout()
plt.show()
```

#### Discussion
The correlation patterns differ substantially between Sub-Saharan Africa and South Asia. Sub-Saharan Africa shows moderate and consistently positive associations among all variables, suggesting a relatively uniform pattern in how public health infrastructure, education, economic conditions, and life expectancy relate to one another in this region. In contrast, the South Asian correlations display greater variability, with a mix of strong and weak positive correlations as well as negative ones.

These differences can be interpreted in the context of broader regional characteristics that shape how these indicators tend to co-occur. In Sub-Saharan Africa, where baseline access to clean water and sanitation is relatively low, countries with higher levels of these services also tend to have higher life expectancy, resulting in moderate positive correlations [@armah2018]. In South Asia, basic water access is generally higher and less variable, so it may not align as closely with differences in life expectancy. Instead, sanitation access shows a stronger association, consistent with the region’s historically severe sanitation-related disease burden [@unicef2022]. These contextual differences may help explain why the pattern of associations differs across the two regions.

It is important to note that some of the more extreme or unexpected correlations, particularly in South Asia, may be influenced by the small number of countries in that regional sample. With only 6 observations, individual countries can exert a large influence on the correlation coefficients. In contrast, the Sub-Saharan Africa region includes 48 countries, offering a more stable basis for identifying general patterns. This difference in sample size may account for findings such as the negative correlation between primary school enrollment and life expectancy in South Asia, which is not observed in Sub-Saharan Africa. Overall, there appears to be correlation between these 5 variables, allowing for deeper analysis into how these indicators interact with one another.

### Variable Correlations: Scatterplots 
#### Methodology
This scatterplot analysis portrays the different development trajectories in South Asia and Sub-Saharan Africa between 2000 and 2020 using five indicators: GDP per capita in constant USD, life expectancy at birth, primary school enrollment, basic water access, and basic sanitation access. To compare regional performance, I aggregated yearly data to create trendlines for each region in order to depict long-run outcomes. To assess inequality within regions, I identified the top three and bottom three countries based on their most recent GDP per capita values and plotted all five indicators over time for these subsets. This shows separate visualizations for high-income and low-income countries within each region. All plots combine scatterpoints to show yearly observations and line trends to highlight the trajectories. Together, the regional plots and the top-bottom GDP plots for both Sub-Saharan Africa and South Asia portray not only how the two regions differ overall but also how inequality appears within each region.

### Results 
The regional comparison plots show how South Asia leads across all five development indicators. Life expectancy rises steadily in both regions, but South Asia maintains a wide lead throughout the period, increasing from roughly 65 to over 73 years. Sub-Saharan Africa improves from about 53 to 63 years, narrowing the gap slightly but not yet approaching South Asia’s levels. Primary school enrollment shows a different pattern as South Asia begins the period with very high enrollment rates, while Sub-Saharan Africa starts much lower but steadily climbs until the two regions come close to converging by 2020. GDP per capita diverges sharply between the regions, with South Asia nearly doubling from around 2,000 to almost 4,000 USD, while Sub-Saharan Africa grows more modestly from about 1,650 to 2,300 USD. Water access improves in both regions, yet South Asia begins at a high baseline and ends the period near universal basic access, while Sub-Saharan Africa lags behind. Sanitation access shows a significant difference as South Asia improves from roughly 40 to nearly 80 percent coverage, compared to Sub-Saharan Africa’s rise from about 25 to the high 30s. 

```{python}
#| echo: false

import wbgapi as wb
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

data = pd.read_csv('data/qtm350_final.csv')

#averages table
avg = data[data['Region'].isin(['Sub-Saharan Africa', 'South Asia'])]
region_year_avgs = avg.groupby(['Region', 'Year']).mean(numeric_only=True).reset_index()
region_year_avgs

#Life Expectancy Over Time Scatterplot for both regions
sns.set(style="whitegrid")
plt.figure(figsize=(12, 6))

sns.scatterplot(
    data=region_year_avgs,
    x='Year',
    y='life_expectancy_birth',
    hue='Region',
    s = 200,
    alpha=0.7,
)

sns.lineplot(
    data=region_year_avgs,
    x='Year',
    y='life_expectancy_birth',
    hue='Region',
    estimator=None,
    lw=2,
    legend=False
)

plt.xticks(
    ticks=sorted(region_year_avgs['Year'].unique()),
    labels=sorted(region_year_avgs['Year'].unique()),
    rotation=45
)

plt.title("Life Expectancy Over Time in Sub-Saharan Africa")
plt.xlabel("Year")
plt.ylabel("Life Expectancy at Birth (Years)")
plt.legend(bbox_to_anchor=(1.05, 1), loc='upper left')
plt.tight_layout()
plt.show()

#Top 3 and Bottom 3 Countries by GDP per Capita in Sub-Saharan Africa
ssa = data[data['Region'].isin(['Sub-Saharan Africa'])]

latest = (
    ssa.sort_values('Year')
      .groupby(['Country', 'Region'])
      .tail(1)
)
top3_ssa = (
    latest.sort_values(by=['Region', 'gdp_per_capita_constant_usd'], ascending=[True, False])
          .groupby('Region')
          .head(3)
)

bottom3_ssa = (
    latest.sort_values(by=['Region', 'gdp_per_capita_constant_usd'], ascending=[True, True])
          .groupby('Region')
          .head(3)
)

print("Top 3 Countries by GDP per Region:")
print(top3_ssa[['Region','Country','gdp_per_capita_constant_usd']])

print("\nBottom 3 Countries by GDP per Region:")
print(bottom3_ssa[['Region','Country','gdp_per_capita_constant_usd']])

#Scatterplots utilizing Top3/Bottom3 in SSA
ssa_countries = pd.concat([top3_ssa, bottom3_ssa])['Country'].unique()
ssa_countries

#GDP per Capita
sns.set(style="whitegrid")
plt.figure(figsize=(12, 6))

sns.scatterplot(
    data=data[data['Country'].isin(ssa_countries)],
    x='Year',
    y='gdp_per_capita_constant_usd',
    hue='Country',
    s=200,
    alpha=0.7
)
```

The top and bottom GDP-per-capita groups within Sub-Saharan Africa demonstrate significant disparities between the top and bottom 3 GDP countries. High-income countries such as Seychelles, Mauritius, and Gabon reach GDP levels between 7,000 and 19,000 USD, maintain life expectancy above 70, and achieve broad access to water and sanitation. At the other end, the region’s lowest-income countries, Burundi, Central African Republic, and Madagascar experience unstable or declining life expectancy, water access that rarely exceeds 55 percent, and sanitation rates that often remain below 20 percent. Some countries experience dramatic dips in life expectancy, and their primary school enrollment remains far below the higher income nations within the region. 

South Asia’s top and bottom GDP-per-capita groups have a different pattern, characterized by moderate inequality rather than extremes. The highest GDP countries Maldives, Sri Lanka, and Bhutan, show strong gains in income, life expectancy, and service access. However, unlike Sub-Saharan Africa, the lowest-GDP South Asian countries, Bangladesh, Nepal, and India, still perform relatively well on human development dimensions. Life expectancy differences between the top and bottom groups are narrower, typically just 5 to 8 years. Water access is high across both groups, and while sanitation access varies more significantly, even the lower-income countries demonstrate consistent upward progress. Primary school enrollment rates also show gradual convergence, indicating that South Asia’s internal disparities do not reach the severe levels observed in Sub-Saharan Africa’s poorest countries. 




### Discussion
The findings indicate that within the different socio-economic conditions of Sub-Saharan Africa and South Asia, South Asia is consistently developing faster than Sub-Saharan Africa for all measures; however, the nature of inequality between countries differs considerably. South Asia continues to have relatively low levels of internal disparity relative to the rate of improvement. Even within the region's lowest GDP countries, there are strong levels of life expectancy, education, and service access. Though they are the poorest countries in South Asia, their GDP still exceeds those of the poorest countries in Sub-Saharan Africa, which suggests that economic gains translate more evenly into human development. In contrast, Sub-Saharan Africa shows both lower overall values and deeper internal inequality. The gap between the richest and poorest Sub-Saharan African countries is larger than the differences observed between South Asia’s highest GDP and lowest GDP countries. The poorest states within Sub-Saharan Africa grapple with limited state capacity as an implication of their low GDP, leading to instability in health outcomes and slower progress in basic services [@leiss2021]. These results suggest that while both regions improve over time, structural and political barriers continue to hamper and unevenly influence development in Sub-Saharan Africa.

Across both regions, South Asia’s development trajectory shows how improvements in health, education, and infrastructure can accompany economic growth and reduce internal disparities, while Sub-Saharan Africa’s performance demonstrates how instability and weak state institutions can hinder the translation of growth into broadly shared development gains. This suggests that effective policy interventions must not only target regional inequalities but focus especially on the structural constraints facing the lowest-performing states, where gains in stability and availability of critical services and resources could have the greatest long-term impact.

### Linear Regression

#### Methodology
To help answer our question we ran three types of linear regression models to see how our predictor variables basic_water_access_pct, basic_sanitation_access_pct, primary_school_enrollment, and gdp_per_capita_constant_usd affected life_expectancy_birth. 

The first type of model is a regular OLS model that does not highlight differences in region, rather treats both regions as one overall area that underwent many developments. Although this was helpful in seeing how our predictors generally affect the life_expectancy_birth, we knew we wanted a model that separated by region to take into account differences that may arise in the two regions.

The second type of linear regression model we created was a parallel lines model, where each region would have its own line, with the same slope but a different intercept. We created a binary variable called Binary_subsaharan_africa where 1 indicates the country is in Sub-Saharan Africa and 0 (the baseline) indicates the country is in South Asia. 

The third type of linear regression model we created was an interaction model. This takes into account the differences between regions, not only in the intercept, but also the slope. This is the most flexible model which we initially thought was the best because it's unlikely the two regions have the same slope. However, after running the regression, we decided not to use this for our analysis due to the insignificant p-values produced.

#### Results
```{python}
#| include: false
import pandas as pd
import statsmodels.api as sm
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

# connect to csv file
df = pd.read_csv("data/qtm350_final.csv")

#Check for NAs and drop them
df[[
    "life_expectancy_birth",
    "basic_water_access_pct",
    "basic_sanitation_access_pct",
    "primary_school_enrollment",
    "gdp_per_capita_constant_usd"
]].isna().sum()

df_clean = df.replace([np.inf, -np.inf], np.nan).dropna(subset=[
    "life_expectancy_birth",
    "basic_water_access_pct",
    "basic_sanitation_access_pct",
    "primary_school_enrollment",
    "gdp_per_capita_constant_usd"
])
```

```{python}
#| echo: false 
#| label: tbl-lmsimplest
#| title: "Linear Regression Model Output"
#| tbl-cap: "Summary of linear regression where region is not a variable"

#One multiple regression ran on all variables, not including region

Y = df_clean["life_expectancy_birth"]
X = df_clean[[
    "basic_water_access_pct",
    "basic_sanitation_access_pct",
    "primary_school_enrollment",
    "gdp_per_capita_constant_usd"
]]

X = sm.add_constant(X)

model = sm.OLS(Y, X).fit()
print(model.summary())
```

This gives us a linear model where:
$$
{life\_expectancy\_birth}_i
= \beta_0
+ \beta_1\,\mathrm{basic\_water\_access\_pct}_i
+ \beta_2\,\mathrm{basic\_sanitation\_access\_pct}_i
+ \beta_3\,\mathrm{primary\_school\_enrollment}_i
+ \beta_4\,\mathrm{gdp\_per\_capita\_constant\_usd}_i
+ \varepsilon_i
$$

More specifically, when we add the coefficients from our model we get:
$$
{life\_expectancy\_birth}_i
= 43.4413
+ 0.1453\mathrm{basic\_water\_access\_pct}_i
+ 0.1111\mathrm{basic\_sanitation\_access\_pct}_i
+ 0.0300\mathrm{primary\_school\_enrollment}_i
- 8.95\times 10^{-6}\mathrm{gdp\_per\_capita\_constant\_usd}_i
$$

These coefficients mean: for a one-unit (one percentage-point) increase in basic_water_access_pct, life_expectancy_birth increases by 0.1453 years, holding other predictors constant. A one-percentage-point increase in basic_sanitation_access_pct is associated with a 0.1111-year increase, and a one-percentage-point increase in primary_school_enrollment is associated with a 0.0300-year increase. The gdp_per_capita_constant_usd coefficient (−8.95×10⁻⁶) means an additional $1 in GDP per capita is associated with a −8.95×10⁻⁶-year change in life expectancy. The intercept 43.4413 is the predicted life expectancy when all predictors equal zero.

The regression output showed an F-statistic of 195.1 with a p-value 6.38e-120 (less than our threshold of 0.05), meaning that at least one of our predictors has a significant relationship with life expectancy. Additionally, all the p-values of the coefficients, except for gdp_per_capita_constant_usd were less than 0.05, meaning that we cannot reject the null hypothesis that these variables have no effect on life expectancy. The R-squared value is low at 0.469 meaning that approximately 46.9% of the variance in life expectancy can be explained by the predictors in our model. However, we know there are numerous factors that can affect life expectancy. We wanted to specifically see how improvements in public health infrastructure affected it to answer our question, and also added GDP, as we knew that would be a very obvious confounding variable. 

```{python}
#| echo: false 
#| label: tbl-lmparallel
#| title: "Parallel Lines Model Output"
#| tbl-cap: "Summary of parallel lines model"

#Create column for Sub-Saharan Africa binary variable (1=Africa, 0=Asia)
df_clean["Binary_subsaharan_africa"] = (df_clean["Region"] == "Sub-Saharan Africa").astype(int)

#Run regression with region, parallel lines model (where two regions have parallel lines: same slope, different intercepts)

Y = df_clean["life_expectancy_birth"]
X = df_clean[[
    "basic_water_access_pct",
    "basic_sanitation_access_pct",
    "primary_school_enrollment",
    "gdp_per_capita_constant_usd",
    "Binary_subsaharan_africa"
]]

X = sm.add_constant(X)
model = sm.OLS(Y, X).fit()
print(model.summary())
```

From this we get two equations predicting life_expectancy_birth - one for each region. 

For South Asia: 
$$
{life\_expectancy\_birth}_i=
52.5842
+0.0929\mathrm{basic\_water\_access\_pct}_i
+0.0852\mathrm{basic\_sanitation\_access\_pct}_i
+0.0301\mathrm{primary\_school\_enrollment}_i
+0.0003\mathrm{gdp\_per\_capita\_constant\_usd}_i
$$

For Sub-Saharan Africa: 
$$
{life\_expectancy\_birth}_i=
(52.5842-6.0865)
+0.0929\mathrm{basic\_water\_access\_pct}_i
+0.0852\mathrm{basic\_sanitation\_access\_pct}_i
+0.0301\mathrm{primary\_school\_enrollment}_i
+0.0003\mathrm{gdp\_per\_capita\_constant\_usd}_i
$$

These equations show that holding the predictor variables constant between the two regions, Sub-Saharan Africa's residents have a life expectancy 6.0865 years shorter than South Asia.

The F-statistic of the regression is 188.0 with a p-value of 2.31e-136. This p-value, since it is less than 0.05, tells us that at least one of the predictors we used has a significant relationship with life expectancy. For the individual coefficients, all p-values are significant which means we cannot reject the null hypothesis that these variables have no relationship on life expectancy. The R-squared is 0.515, which is still quite low, but as mentioned previously, we didn’t necessarily want to create a model with all potential predictors of life expectancy, as that isn’t our research question.
```{python}
#| echo: false
#| label: fig-parallelwatervslifeexp
#| fig-cap: "Water Access: Predicted vs Actual (Parallel Lines Model)"

x_var = "basic_water_access_pct"
label = "Water Access (%)"
x_range = np.linspace(df_clean[x_var].min(), df_clean[x_var].max(), 150)

# Mean values for other predictors
means = {
    "basic_sanitation_access_pct": df_clean["basic_sanitation_access_pct"].mean(),
    "primary_school_enrollment": df_clean["primary_school_enrollment"].mean(),
    "gdp_per_capita_constant_usd": df_clean["gdp_per_capita_constant_usd"].mean()
}

# Predicted life expectancy for Asia
pred_asia = (
    model.params["const"]
    + model.params["basic_water_access_pct"] * x_range
    + model.params["basic_sanitation_access_pct"] * means["basic_sanitation_access_pct"]
    + model.params["primary_school_enrollment"] * means["primary_school_enrollment"]
    + model.params["gdp_per_capita_constant_usd"] * means["gdp_per_capita_constant_usd"]
)

# Africa prediction = Asia + region intercept
pred_africa = pred_asia + model.params["Binary_subsaharan_africa"]

plt.figure(figsize=(7,5))

# Asia scatter (blue)
plt.scatter(
    df_clean.loc[df_clean["Binary_subsaharan_africa"] == 0, x_var],
    df_clean.loc[df_clean["Binary_subsaharan_africa"] == 0, "life_expectancy_birth"],
    c="blue",
    alpha=0.6,
    label="Asia (Actual)"
)

# Africa scatter (red)
plt.scatter(
    df_clean.loc[df_clean["Binary_subsaharan_africa"] == 1, x_var],
    df_clean.loc[df_clean["Binary_subsaharan_africa"] == 1, "life_expectancy_birth"],
    c="red",
    alpha=0.4,
    label="Africa (Actual)"
)

# --- Predicted lines ---
plt.plot(x_range, pred_asia, "k--", label="Asia (Predicted)")
plt.plot(x_range, pred_africa, "k-", label="Africa (Predicted)")

plt.xlabel(label)
plt.ylabel("Life Expectancy at Birth")
plt.title("Life Expectancy vs Water Access — Actual vs Predicted")
plt.legend()
plt.grid(alpha=0.3)
plt.show()
```
```{python}
#| echo: false
#| label: fig-parallelsanitationvslifeexp
#| fig-cap: "Sanitation Access: Predicted vs Actual (Parallel Lines Model)"

x_var = "basic_sanitation_access_pct"
x_range = np.linspace(df_clean[x_var].min(), df_clean[x_var].max(), 150)

# Mean values for other predictors
means = {
    "basic_water_access_pct": df_clean["basic_water_access_pct"].mean(),
    "primary_school_enrollment": df_clean["primary_school_enrollment"].mean(),
    "gdp_per_capita_constant_usd": df_clean["gdp_per_capita_constant_usd"].mean()
}

# Predictions for Asia
pred_asia = (
    model.params["const"]
    + model.params["basic_water_access_pct"] * means["basic_water_access_pct"]
    + model.params["primary_school_enrollment"] * means["primary_school_enrollment"]
    + model.params["gdp_per_capita_constant_usd"] * means["gdp_per_capita_constant_usd"]
    + model.params["basic_sanitation_access_pct"] * x_range
)
# Predictions for Africa
pred_africa = pred_asia + model.params["Binary_subsaharan_africa"]

# Plot
plt.figure(figsize=(7,5))
plt.scatter(
    df_clean.loc[df_clean["Binary_subsaharan_africa"] == 0, x_var],
    df_clean.loc[df_clean["Binary_subsaharan_africa"] == 0, "life_expectancy_birth"],
    c="blue", alpha=0.6, label="Asia (Actual)"
)
plt.scatter(
    df_clean.loc[df_clean["Binary_subsaharan_africa"] == 1, x_var],
    df_clean.loc[df_clean["Binary_subsaharan_africa"] == 1, "life_expectancy_birth"],
    c="red", alpha=0.4, label="Africa (Actual)"
)
plt.plot(x_range, pred_asia, "k--", label="Asia (Predicted)")
plt.plot(x_range, pred_africa, "k-", label="Africa (Predicted)")

plt.xlabel("Basic Sanitation Access (%)")
plt.ylabel("Life Expectancy at Birth")
plt.title("Life Expectancy vs Sanitation Access — Actual vs Predicted")
plt.legend()
plt.grid(alpha=0.3)
plt.show()
```

```{python}
#| echo: false
#| label: fig-parallelschoolvslifeexp
#| fig-cap: "Primary School Enrollment: Predicted vs Actual (Parallel Lines Model)"

x_var = "primary_school_enrollment"
x_range = np.linspace(df_clean[x_var].min(), df_clean[x_var].max(), 150)

# Mean values for other predictors
means = {
    "basic_water_access_pct": df_clean["basic_water_access_pct"].mean(),
    "basic_sanitation_access_pct": df_clean["basic_sanitation_access_pct"].mean(),
    "gdp_per_capita_constant_usd": df_clean["gdp_per_capita_constant_usd"].mean()
}

# Predictions for Asia
pred_asia = (
    model.params["const"]
    + model.params["basic_water_access_pct"] * means["basic_water_access_pct"]
    + model.params["basic_sanitation_access_pct"] * means["basic_sanitation_access_pct"]
    + model.params["gdp_per_capita_constant_usd"] * means["gdp_per_capita_constant_usd"]
    + model.params["primary_school_enrollment"] * x_range
)
# Predictions for Africa
pred_africa = pred_asia + model.params["Binary_subsaharan_africa"]

# Plot
plt.figure(figsize=(7,5))
plt.scatter(
    df_clean.loc[df_clean["Binary_subsaharan_africa"] == 0, x_var],
    df_clean.loc[df_clean["Binary_subsaharan_africa"] == 0, "life_expectancy_birth"],
    c="blue", alpha=0.6, label="Asia (Actual)"
)
plt.scatter(
    df_clean.loc[df_clean["Binary_subsaharan_africa"] == 1, x_var],
    df_clean.loc[df_clean["Binary_subsaharan_africa"] == 1, "life_expectancy_birth"],
    c="red", alpha=0.4, label="Africa (Actual)"
)
plt.plot(x_range, pred_asia, "k--", label="Asia (Predicted)")
plt.plot(x_range, pred_africa, "k-", label="Africa (Predicted)")

plt.xlabel("Primary School Enrollment (%)")
plt.ylabel("Life Expectancy at Birth")
plt.title("Life Expectancy vs Primary School Enrollment — Actual vs Predicted")
plt.legend()
plt.grid(alpha=0.3)
plt.show()

```

These plots show our predicted vs. actual for the three predictor variables of interest. We did not include GDP because it was a confounding variable we included in our regression, but not the main point of our research question.
South Asia's dots in @fig-parallelwatervslifeexp show that there are much higher levels of water access compared to Sub-Saharan Africa. We observe in @fig-parallelsanitationvslifeexp that South Asia's dots are closely clustered together, while for Sub-Saharan Africa, they are much more widely dispersed- for example a Sanitation Access of 40% may mean a life expectancy anywhere between 45 and 70 years in Sub-Saharan Africa, but in South Asia, a Sanitation Access of 40% means a life expectancy of ~67 years. We can see in @fig-parallelschoolvslifeexp that the blue dots for South Asia are above the red dots for Sub-Saharan Africa, and this is reflected in our model. Sub-Saharan Africa also has a wider range of primary school enrollment compared to South Asia. 

```{python}
#| echo: false 
#| label: tbl-lminteraction
#| title: "Interaction Model Output"
#| tbl-cap: "Summary of interaction model"

#Interaction model (where two regions have different slopes and intercepts)

# Create interaction terms
df_clean["water_x_region"] = df_clean["basic_water_access_pct"] * df_clean["Binary_subsaharan_africa"]
df_clean["sanitation_x_region"] = df_clean["basic_sanitation_access_pct"] * df_clean["Binary_subsaharan_africa"]
df_clean["school_x_region"] = df_clean["primary_school_enrollment"] * df_clean["Binary_subsaharan_africa"]
df_clean["gdp_x_region"] = df_clean["gdp_per_capita_constant_usd"] * df_clean["Binary_subsaharan_africa"]

# Y variable
Y = df_clean["life_expectancy_birth"]

# X variables with interactions
X = df_clean[[
    "basic_water_access_pct",
    "basic_sanitation_access_pct",
    "primary_school_enrollment",
    "gdp_per_capita_constant_usd",
    "Binary_subsaharan_africa",
    "water_x_region",
    "sanitation_x_region",
    "school_x_region",
    "gdp_x_region"
]]

X = sm.add_constant(X)
model_interaction = sm.OLS(Y, X).fit()
print(model_interaction.summary())
```

However, for the individual coefficients, there are more p-values greater than 0.05 compared to the linear regression which doesn’t specify region. This means for the variables where p-value > 0.05, we cannot reject the null hypothesis that the variable has no effect on life expectancy. Many of these terms are the interaction coefficients, which may mean that an interaction term is not useful in creating better predictions. Hence, we decided not to use this model in our analysis. 

#### Discussion
The linear regression results consistently point to positive associations between access to basic water and sanitation and life expectancy, with smaller positive associations for primary school enrollment and little-to-no independent effect from GDP per capita.

The persistent regional intercept gap implies that even after accounting for measured water, sanitation, schooling, and GDP, Sub-Saharan African countries have lower life expectancy than South Asian countries by several years. This gap likely reflects other unmeasured factors (e.g., health system quality, conflict, disease burden, or historical differences) that are not captured by our limited set of covariates.

It's important to note that linear regression outputs rely on Gauss-Markov assumptions which we have not verified here. Additionally, water and sanitation are highly correlated with each other and with other development measures, which may cause multicollinearity and make coefficient interpretation less stable. Moreover, linear regression is a worse fit for data when there is less data to work with. Since South Asia has far less countires than Sub-Saharan Africa, results for South Asia may be more sensitive to outliers.

Overall, the regression results show improvements in public health infrastructure (water and sanitation) are consistently associated with higher life expectancy across specifications. These associations are substantively meaningful: increasing basic water or sanitation access by 10 percentage points is associated with an increase in life expectancy around 1 year, holding other variables constant. Government focus on improving these public health metrics may be helpful in improving life expectancy.

## Discussion

## Conclusion

## References